<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
    <style>
        :root {
            --primary: #4a90e2;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --bg: #f4f7f6;
            --text: #2c3e50;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        h1, h2, h3 { color: #34495e; }

        .section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 30px; }

        /* –¢–∞–±–ª–∏—Ü–∞ */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { background: #f8f9fa; text-align: left; padding: 12px; border-bottom: 2px solid #dee2e6; color: #7f8c8d; }
        td { padding: 12px; border-bottom: 1px solid #eee; vertical-align: middle; }
        tr:hover { background: #f9f9f9; }

        /* –°—Ç–∞—Ç—É—Å—ã */
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.85em; font-weight: bold; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-scheduled { background: #d4edda; color: #155724; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ */
        .account-box { background: #ebf5ff; border: 1px solid #bddbff; padding: 8px; border-radius: 6px; font-size: 0.9em; min-width: 150px; }
        .account-box small { color: #5dade2; display: block; margin-bottom: 2px; }
        
        /* –§–æ—Ä–º—ã */
        input, select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; outline: none; }
        input:focus { border-color: var(--primary); }
        
        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; transition: 0.2s; }
        .btn-success { background: var(--success); color: white; }
        .btn-success:hover { background: #219150; }
        .btn-primary { background: var(--primary); color: white; }

        .notif-list { list-style: none; padding: 0; }
        .notif-item { background: #fff; border-left: 4px solid var(--danger); padding: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<div class="container">
    <h1>üõ°Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>

    <div class="section">
        <h2>üîî –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
        <ul class="notif-list">
            {{range .Notifications}}
            <li class="notif-item">
                <span><strong>[{{.Time}}]</strong> {{.Message}}</span>
                <button class="btn" style="background: #eee;">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>
            </li>
            {{else}}
            <p style="color: #999;">–ù–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç</p>
            {{end}}
        </ul>
    </div>

    <div class="section">
        <h2>üìö –í—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –∑–∞–Ω—è—Ç–∏—è</h2>
        <table>
            <thead>
                <tr>
                    <th>–£—á–µ–Ω–∏–∫ / –¢–µ–ª–µ—Ñ–æ–Ω</th>
                    <th>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä</th>
                    <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–æ—Å—Ç—É–ø –≤ –∫–∞–±–∏–Ω–µ—Ç</th>
                </tr>
            </thead>
                <tbody>
                    {{range .AllLessons}}
                    <tr>
                        <td>
                            <strong>{{.StudentName}}</strong><br>
                            <small style="color: #666;">{{.StudentPhone}}</small>
                        </td>

                        <td>{{.TutorName}}</td>

                        <td>
                            <div style="font-weight: 600; color: #2c3e50;">{{.ScheduleDisplay}}</div>
                            <div style="color: #4a90e2; font-size: 0.9em;">üïì –≤ {{.StartTime}}</div>
                            {{if .IsRecurring}}
                                <span style="font-size: 10px; color: #27ae60; background: #e6f4ea; padding: 2px 5px; border-radius: 3px;">üîÅ –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–û</span>
                            {{else}}
                                <span style="font-size: 10px; color: #e67e22; background: #fef1e6; padding: 2px 5px; border-radius: 3px;">üìÖ –†–ê–ó–û–í–û</span>
                            {{end}}
                        </td>

                        <td>
                            <span class="badge {{if eq .Status "pending"}}status-pending{{else}}status-scheduled{{end}}">
                                {{.Status}}
                            </span>
                        </td>

                        <td>
                            {{if .StudentID}}
                                <div class="account-box">
                                    <small>–î–æ—Å—Ç—É–ø –≤—ã–¥–∞–Ω:</small>
                                    <strong>L:</strong> {{.AccLogin}} | <strong>P:</strong> {{.AccPassword}}
                                </div>
                            {{else}}
                                <form action="/api/admin/create-student" method="POST" style="display: flex; gap: 5px;">
                                    <input type="hidden" name="lesson_id" value="{{.ID}}">
                                    <input type="text" name="login" placeholder="–õ–æ–≥–∏–Ω" required style="width: 80px;">
                                    <input type="text" name="password" placeholder="–ü–∞—Ä–æ–ª—å" required style="width: 80px;">
                                    <button type="submit" class="btn btn-success">–í—ã–¥–∞—Ç—å</button>
                                </form>
                            {{end}}
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 30px; color: #999;">–í –±–∞–∑–µ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —É—Ä–æ–∫–∞.</td>
                    </tr>
                    {{end}}
                </tbody>
        </table>
    </div>

    <div class="section">
        <h3>üÜï –°–æ–∑–¥–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç</h3>
        <form action="/api/admin/create-user" method="POST" style="display: flex; gap: 15px; align-items: center;">
            <input type="text" name="new_login" placeholder="–õ–æ–≥–∏–Ω" required>
            <input type="text" name="new_password" placeholder="–ü–∞—Ä–æ–ª—å (8 —Å–∏–º–≤.)" minlength="8" required>
            <select name="role">
                <option value="tutor">–†–µ–ø–µ—Ç–∏—Ç–æ—Ä</option>
                <option value="student">–£—á–µ–Ω–∏–∫</option>
            </select>
            <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        </form>
    </div>
</div>

</body>
</html>